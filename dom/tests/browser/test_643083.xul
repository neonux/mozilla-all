<?xml version="1.0"?>

<!-- Any copyright is dedicated to the Public Domain.
     http://creativecommons.org/publicdomain/zero/1.0/ -->

<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
<window title="Bug 643083"
  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
  width="500" height="500" orient="vertical"
  onload="init()">

  <script type="text/javascript"><![CDATA[
    function init() {
      var scriptNode = document.getElementById("content-script");
      var scriptText = scriptNode.textContent;
      var contentScript = "data:text/javascript;charset=utf-8," + encodeURI(scriptText);
      messageManager.loadFrameScript(contentScript, true);
    }

    function browser() {
      return document.getElementById("content");
    }
  ]]></script>

  <!-- The code below runs in the child process and has a different context.
       It is serialized and loaded as a frame script. Note the type attribute. -->
  <script id="content-script" type="text/content-javascript"><![CDATA[
    sendAsyncMessage("scroll", { x: 2, y: 5 });
  ]]></script>

  <browser type="content" src="" flex="1" id="content"
           remote="true"/>
</window>
