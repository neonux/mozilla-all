348[314500]: STS thread init
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [1]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = -1 milliseconds
0[314280]: Creating nsHttpHandler [this=1b891a0].
0[314280]: nsHttpHandler::Init
0[314280]: nsHttpHandler::PrefsChanged [pref=(null)]
0[314280]: nsHttpAuthCache::Init
0[314280]: Creating nsHttpConnectionMgr @1b851f0
0[314280]: nsHttpConnectionMgr::Init
0[314280]: nsHttpHandler::StartPruneDeadConnectionsTimer
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewChannel
0[314280]: nsHttpHandler::NewProxiedChannel [proxyInfo=0]
0[314280]: Creating nsHttpChannel @d69630
0[314280]: nsHttpChannel::Init [this=d69630]
0[314280]: host=aus2.mozilla.org port=-1
0[314280]: uri=https://aus2.mozilla.org/update/3/Firefox/3.0b4/2008030714/WINNT_x86-msvc/zh-CN/beta/Windows_NT%205.1/default/default/update.xml?force=1
0[314280]: Creating nsHttpConnectionInfo @20d0160
0[314280]: nsHttpHandler::BuildUserAgent
0[314280]: nsHttpChannel::SetRequestHeader [this=d69630 header="Cache-Control" value="no-cache" merge=0]
0[314280]: nsHttpChannel::AsyncOpen [this=d69630]
0[314280]: nsHttpHandler::NotifyObservers [chan=d6965c event="http-on-modify-request"]
0[314280]: nsHttpChannel::Connect [this=d69630]
0[314280]: nsHttpChannel::OpenCacheEntry [this=d69630]
0[314280]: got cache entry [access=2]
0[314280]: nsHTTPChannel::CheckCache [this=d69630 entry=20df700]
0[314280]: nsHttpChannel::AddAuthorizationHeaders? [this=d69630]
0[314280]: nsHttpAuthCache::GetAuthEntryForPath [key=https://aus2.mozilla.org:443 path=/update/3/Firefox/3.0b4/2008030714/WINNT_x86-msvc/zh-CN/beta/Windows_NT%205.1/default/default/]
0[314280]: nsHttpChannel::SetupTransaction [this=d69630]
0[314280]: Creating nsHttpTransaction @1fa4dc0
0[314280]: nsHttpTransaction::Init [this=1fa4dc0 caps=3]
0[314280]: http request [
0[314280]:   GET /update/3/Firefox/3.0b4/2008030714/WINNT_x86-msvc/zh-CN/beta/Windows_NT%205.1/default/default/update.xml?force=1 HTTP/1.1
0[314280]:   Host: aus2.mozilla.org
0[314280]:   User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9b4) Gecko/2008030714 Firefox/3.0b4
0[314280]:   Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
0[314280]:   Accept-Language: zh-cn,zh;q=0.5
0[314280]:   Accept-Encoding: gzip,deflate
0[314280]:   Accept-Charset: gb2312,utf-8;q=0.7,*;q=0.7
0[314280]:   Keep-Alive: 300
0[314280]:   Connection: keep-alive
0[314280]:   Cache-Control: no-cache
0[314280]: ]
0[314280]: nsHttpConnectionMgr::AddTransaction [trans=1fa4dc0 0]
0[314280]: STS dispatch [20df720]
348[314500]:     ...returned after 1874 milliseconds
348[314500]: nsHttpConnectionMgr::OnMsgNewTransaction [trans=1fa4dc0]
348[314500]: nsHttpConnectionMgr::GetConnection [ci=.Saus2.mozilla.org:443 caps=3]
348[314500]: nsHttpConnectionMgr::AtActiveConnectionLimit [ci=.Saus2.mozilla.org:443 caps=3]
348[314500]:    total=0, persist=0
348[314500]: Creating nsHttpConnection @1fa1fe0
348[314500]: nsHttpConnection::Init [this=1fa1fe0]
348[314500]: nsHttpConnectionMgr::DispatchTransaction [ci=.Saus2.mozilla.org:443 trans=1fa4dc0 caps=3 conn=1fa1fe0]
348[314500]: nsHttpConnection::Activate [this=1fa1fe0 trans=1fa4dc0 caps=3]
348[314500]: creating nsSocketTransport @1e06900
348[314500]: nsSocketTransport::Init [this=1e06900 host=aus2.mozilla.org:443 proxy=:0]
348[314500]: nsSocketTransport::OpenOutputStream [this=1e06900 flags=2]
348[314500]: nsSocketTransport::PostEvent [this=1e06900 type=0 status=0 param=0]
348[314500]: STS dispatch [20df780]
348[314500]: nsSocketTransport::OpenInputStream [this=1e06900 flags=2]
348[314500]: nsSocketTransport::PostEvent [this=1e06900 type=0 status=0 param=0]
348[314500]: STS dispatch [20df7a0]
348[314500]: nsSocketOutputStream::AsyncWait [this=1e069b8]
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: nsSocketTransport::OnSocketEvent [this=1e06900 type=0 status=0 param=0]
348[314500]:   MSG_ENSURE_CONNECT
348[314500]: nsSocketTransport::ResolveHost [this=1e06900]
348[314500]: nsHostResolver::ResolveHost [host=aus2.mozilla.org]
348[314500]:   advancing to STATE_RESOLVING
348[314500]: nsSocketTransport::SendStatus [this=1e06900 status=804b0003]
348[314500]: nsHttpTransaction::OnSocketStatus [this=1fa4dc0 status=804b0003 progress=0]
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: nsSocketTransport::OnSocketEvent [this=1e06900 type=0 status=0 param=0]
348[314500]:   MSG_ENSURE_CONNECT
348[314500]:   ignoring redundant event
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [1]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = -1 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [1]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = -1 milliseconds
2732[1f13ec0]: nsHostResolver::ThreadFunc entering
2732[1f13ec0]: resolving aus2.mozilla.org ...
2732[1f13ec0]: nsSocketTransport::PostEvent [this=1e06900 type=1 status=0 param=12e8c20]
2732[1f13ec0]: STS dispatch [12e8c80]
2732[1f13ec0]: lookup complete for aus2.mozilla.org ...
348[314500]:     ...returned after 58 milliseconds
348[314500]: nsSocketTransport::OnSocketEvent [this=1e06900 type=1 status=0 param=12e8c20]
348[314500]:   MSG_DNS_LOOKUP_COMPLETE
348[314500]: nsSocketTransport::InitiateSocket [this=1e06900]
348[314500]: nsSocketTransport::BuildSocket [this=1e06900]
348[314500]:   pushing io layer [0:ssl]
348[314500]:   [secinfo=20ef230 callbacks=1fa1ff4]
348[314500]: nsSocketTransportService::AttachSocket [handler=1e06900]
348[314500]: nsSocketTransportService::AddToIdleList [handler=1e06900]
348[314500]:   active=0 idle=1
348[314500]:   advancing to STATE_CONNECTING
348[314500]: nsSocketTransport::SendStatus [this=1e06900 status=804b0007]
348[314500]: nsHttpTransaction::OnSocketStatus [this=1fa4dc0 status=804b0007 progress=0]
348[314500]:   trying address: 63.245.209.49
348[314500]: STS poll iter [0]
348[314500]:   idle [0] { handler=1e06900 condition=0 pollflags=6 }
348[314500]: nsSocketTransportService::AddToPollList [handler=1e06900]
348[314500]:   active=1 idle=1
348[314500]: nsSocketTransportService::RemoveFromIdleList [handler=1e06900]
348[314500]:   active=1 idle=0
348[314500]:   calling PR_Poll [active=1 idle=0]
348[314500]: poll timeout: 65535
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [0]
348[314500]:   active [0] { handler=1e06900 condition=0 pollflags=6 }
348[314500]:   calling PR_Poll [active=1 idle=0]
348[314500]: poll timeout: 65535
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [1]
348[314500]:   active [0] { handler=1e06900 condition=0 pollflags=6 }
348[314500]:   calling PR_Poll [active=1 idle=0]
348[314500]: poll timeout: 65535
348[314500]:     timeout = 65535000 milliseconds
348[314500]:     ...returned after 70 milliseconds
348[314500]: nsSocketTransport::OnSocketReady [this=1e06900 outFlags=2]
348[314500]:   advancing to STATE_TRANSFERRING
348[314500]: nsSocketTransport::SendStatus [this=1e06900 status=804b0004]
348[314500]: nsHttpTransaction::OnSocketStatus [this=1fa4dc0 status=804b0004 progress=0]
348[314500]: STS poll iter [1]
348[314500]:   active [0] { handler=1e06900 condition=0 pollflags=7 }
348[314500]:   calling PR_Poll [active=1 idle=0]
348[314500]: poll timeout: 65535
348[314500]:     timeout = 65535000 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: nsSocketTransport::OnSocketReady [this=1e06900 outFlags=3]
348[314500]: nsSocketOutputStream::OnSocketReady [this=1e069b8 cond=0]
348[314500]: nsHttpConnection::OnSocketWritable [this=1fa1fe0]
348[314500]:   writing transaction request stream
348[314500]: nsSocketOutputStream::Write [this=1e069b8 count=502]
348[314500]:   calling PR_Write [count=502]
348[314500]:   PR_Write returned [n=-1]
348[314500]:   ReadSegments returned [rv=0 read=0 sock-cond=80470007]
348[314500]: nsSocketOutputStream::AsyncWait [this=1e069b8]
348[314500]: nsSocketInputStream::OnSocketReady [this=1e06998 cond=0]
348[314500]: STS poll iter [1]
348[314500]:   active [0] { handler=1e06900 condition=0 pollflags=6 }
348[314500]:   calling PR_Poll [active=1 idle=0]
348[314500]: poll timeout: 65535
348[314500]:     timeout = 65535000 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: nsSocketTransport::OnSocketReady [this=1e06900 outFlags=2]
348[314500]: nsSocketOutputStream::OnSocketReady [this=1e069b8 cond=0]
348[314500]: nsHttpConnection::OnSocketWritable [this=1fa1fe0]
348[314500]:   writing transaction request stream
348[314500]: nsSocketOutputStream::Write [this=1e069b8 count=502]
348[314500]:   calling PR_Write [count=502]
348[314500]:   PR_Write returned [n=-1]
348[314500]:   ReadSegments returned [rv=0 read=0 sock-cond=80470007]
348[314500]: nsSocketOutputStream::AsyncWait [this=1e069b8]
348[314500]: STS poll iter [1]
348[314500]:   active [0] { handler=1e06900 condition=0 pollflags=6 }
348[314500]:   calling PR_Poll [active=1 idle=0]
348[314500]: poll timeout: 65535
348[314500]:     timeout = 65535000 milliseconds
0[314280]: nsHttpChannel::Cancel [this=d69630 status=804b0002]
0[314280]: nsHttpConnectionMgr::CancelTransaction [trans=1fa4dc0 reason=804b0002]
0[314280]: STS dispatch [24fe7a0]
348[314500]:     ...returned after 67 milliseconds
348[314500]: nsHttpConnectionMgr::OnMsgCancelTransaction [trans=1fa4dc0]
348[314500]: nsHttpConnection::CloseTransaction[this=1fa1fe0 trans=1fa4dc0 reason=804b0002]
348[314500]: nsHttpTransaction::Close [this=1fa4dc0 reason=804b0002]
348[314500]: nsHttpConnectionMgr::ReclaimConnection [conn=1fa1fe0]
348[314500]: STS dispatch [24fe7c0]
348[314500]: nsHttpConnection::Close [this=1fa1fe0 reason=804b0002]
348[314500]: nsSocketInputStream::CloseWithStatus [this=1e06998 reason=804b0002]
348[314500]: nsSocketTransport::OnMsgInputClosed [this=1e06900 reason=804b0002]
348[314500]: nsSocketOutputStream::CloseWithStatus [this=1e069b8 reason=804b0002]
348[314500]: nsSocketTransport::OnMsgOutputClosed [this=1e06900 reason=804b0002]
348[314500]: STS poll iter [0]
348[314500]:   active [0] { handler=1e06900 condition=804b0002 pollflags=6 }
348[314500]: nsSocketTransportService::DetachSocket [handler=1e06900]
348[314500]: nsSocketTransport::OnSocketDetached [this=1e06900 cond=804b0002]
348[314500]: nsSocketTransport::RecoverFromError [this=1e06900 state=4 cond=804b0002]
348[314500]: nsSocketInputStream::OnSocketReady [this=1e06998 cond=804b0002]
348[314500]: nsSocketOutputStream::OnSocketReady [this=1e069b8 cond=804b0002]
348[314500]:   no transaction; ignoring event
348[314500]: nsSocketTransport: calling PR_Close [this=1e06900]
348[314500]: nsSocketTransportService::RemoveFromPollList [handler=0]
348[314500]:   index=0 mActiveCount=1
348[314500]:   active=0 idle=0
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: nsHttpConnectionMgr::OnMsgReclaimConnection [conn=1fa1fe0]
348[314500]:   connection cannot be reused; closing connection
348[314500]: nsHttpConnection::Close [this=1fa1fe0 reason=80004004]
348[314500]: nsSocketInputStream::CloseWithStatus [this=1e06998 reason=80004004]
348[314500]: nsSocketOutputStream::CloseWithStatus [this=1e069b8 reason=80004004]
348[314500]: nsHttpConnectionMgr::OnMsgProcessPendingQ [ci=.Saus2.mozilla.org:443]
348[314500]: nsHttpConnectionMgr::ProcessPendingQForEntry [ci=.Saus2.mozilla.org:443]
348[314500]: nsHttpConnectionMgr::ProcessPendingQForEntry [ci=.Saus2.mozilla.org:443]
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [1]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = -1 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [1]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = -1 milliseconds
0[314280]: nsHttpChannel::Cancel [this=d69630 status=804b0002]
0[314280]:   ignoring; already canceled
0[314280]: nsHttpChannel::Cancel [this=d69630 status=804b0002]
0[314280]:   ignoring; already canceled
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpHandler::NewURI
0[314280]: nsHttpChannel::OnStartRequest [this=d69630 request=20d1740 status=804b0002]
0[314280]:   calling mListener->OnStartRequest
0[314280]: nsHttpChannel::OnStopRequest [this=d69630 request=20d1740 status=804b0002]
0[314280]: nsHttpTransaction::DeleteSelfOnConsumerThread [this=1fa4dc0]
0[314280]: Destroying nsHttpTransaction @1fa4dc0
0[314280]: nsHttpChannel::FinalizeCacheEntry [this=d69630]
0[314280]:   calling OnStopRequest
0[314280]: nsHttpChannel::CloseCacheEntry [this=d69630]
0[314280]:   dooming cache entry!!
0[314280]: Destroying nsHttpConnection @1fa1fe0
0[314280]: nsSocketOutputStream::CloseWithStatus [this=1e069b8 reason=80470002]
0[314280]: nsSocketInputStream::CloseWithStatus [this=1e06998 reason=80470002]
0[314280]: destroying nsSocketTransport @1e06900
0[314280]: nsHttpHandler::Observe [topic="profile-change-net-teardown"]
0[314280]: nsHttpHandler::StopPruneDeadConnectionsTimer
0[314280]: nsHttpAuthCache::ClearAll
0[314280]: nsHttpConnectionMgr::Shutdown
0[314280]: STS dispatch [134b700]
348[314500]:     ...returned after 781 milliseconds
348[314500]: nsHttpConnectionMgr::OnMsgShutdown
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [1]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = -1 milliseconds
0[314280]: nsHostResolver::Shutdown
0[314280]: evicting record
2732[1f13ec0]: nsHostResolver::ThreadFunc exiting
0[314280]: nsSocketTransportService::Shutdown
348[314500]:     ...returned after 1 milliseconds
348[314500]: STS poll iter [1]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = -1 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS shutting down thread
348[314500]: STS poll iter [0]
348[314500]:   calling PR_Poll [active=0 idle=0]
348[314500]:     timeout = 0 milliseconds
348[314500]:     ...returned after 0 milliseconds
348[314500]: STS thread exit
0[314280]: nsHttpHandler::Observe [topic="xpcom-shutdown"]
0[314280]: nsHttpHandler::StopPruneDeadConnectionsTimer
0[314280]: nsHttpAuthCache::ClearAll
0[314280]: nsHttpConnectionMgr::Shutdown
0[314280]: Destroying nsHttpChannel @d69630
0[314280]: Destroying nsHttpConnectionInfo @20d0160
0[314280]: Deleting nsHttpHandler [this=1b891a0]
0[314280]: nsHttpConnectionMgr::Shutdown
0[314280]: Destroying nsHttpConnectionMgr @1b851f0
