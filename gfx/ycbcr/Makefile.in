DEPTH		= ../..
topsrcdir	= @top_srcdir@
srcdir		= @srcdir@
VPATH		= @srcdir@

include $(DEPTH)/config/autoconf.mk

MODULE       = ycbcr
LIBRARY_NAME = ycbcr
LIBXUL_LIBRARY = 1
EXPORT_LIBRARY = 1

DEFINES += -D_IMPL_NS_GFX

EXPORTS      = chromium_types.h \
               yuv_convert.h \
               yuv_row.h \
               $(NULL)

CPPSRCS = yuv_convert.cpp \
          yuv_row_c.cpp \
          yuv_row_table.cpp \
          $(NULL)

ifdef _MSC_VER
CPPSRCS += yuv_row_win.cpp \
           $(NULL)
else
ifeq ($(OS_ARCH),Linux)
CPPSRCS += yuv_row_posix.cpp \
           $(NULL)
else
ifeq ($(OS_ARCH),SunOS)
CPPSRCS += yuv_row_posix.cpp \
           $(NULL)
else
ifeq ($(OS_ARCH),Darwin)
CPPSRCS += yuv_row_posix.cpp \
           $(NULL)
else
CPPSRCS += yuv_row_other.cpp \
           $(NULL)
endif # Darwin
endif # SunOS
endif # linux
endif # windows

ifeq (arm,$(findstring arm,$(OS_TEST)))
CPPSRCS += yuv_convert_arm.cpp \
           $(NULL)
endif

EXTRA_DSO_LDOPTS += \
        $(LIBS_DIR) \
        $(EXTRA_DSO_LIBS) \
        $(XPCOM_LIBS) \
        $(NSPR_LIBS) \
        $(NULL)

include $(topsrcdir)/config/rules.mk
